/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @fileoverview Angle input field.
 */
import * as Blockly from 'blockly/core';
/**
 * Class for an editable angle field.
 */
export declare class FieldAngle extends Blockly.FieldNumber {
    /** Half the width of protractor image. */
    static readonly HALF: number;
    /**
     * Radius of protractor circle.  Slightly smaller than protractor size since
     * otherwise SVG crops off half the border at the edges.
     */
    static readonly RADIUS: number;
    static readonly DEFAULT_PRECISION = 15;
    static readonly DEFAULT_MIN = 0;
    static readonly DEFAULT_MAX = 360;
    /**
     * Whether the angle should increase as the angle picker is moved clockwise
     * (true) or counterclockwise (false).
     */
    private clockwise;
    /**
     * The angle (in degrees) at which displayMin is pointed.  Always in the
     * counterclockwise direction, regardless of the field's clockwise property.
     * Usually either 0 (0 = right) or 90 (0 = up).
     */
    private offset;
    /**
     * Smallest value displayed on the gauge.  Usually 0 or -180.
     */
    private displayMin;
    /**
     * Largest value displayed on the gauge.  Usually 360 or 180.
     */
    private displayMax;
    /**
     * Distance between minor tick marks on dial.  Zero to disable.
     * If displayMin/Max span 360, then majorTick would usually be 15.
     * May not be negative.
     */
    private minorTick;
    /**
     * Distance between major tick marks on dial.  Zero to disable.
     * If displayMin/Max span 360, then majorTick would usually be 45.
     * May not be negative.
     */
    private majorTick;
    /**
     * Unit symbol to append to the number when not being edited.
     */
    private symbol;
    /**
     * Array holding info needed to unbind events.
     * Used for disposing.
     * Ex: [[node, name, func], [node, name, func]].
     */
    private boundEvents;
    /** Dynamic red line pointing at the value's angle. */
    private line;
    /** Dynamic pink area extending from 0 to the value's angle. */
    private gauge;
    /** The degree symbol for this field. */
    protected symbolElement: SVGTSpanElement | null;
    /**
     * @param value The initial value of the field.  Should cast to a number.
     *     Defaults to 0.  Also accepts Field.SKIP_SETUP if you wish to skip setup
     *     (only used by subclasses that want to handle configuration and setting
     *     the field value after their own constructors have run).
     * @param validator A function that is called to validate changes to the
     *     field's value.  Takes in a number & returns a validated number, or null
     *     to abort the change.
     * @param config A map of options used to configure the field.
     *     See the [field creation documentation]{@link
     * https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/angle#creation}
     * for a list of properties this parameter supports.
     */
    constructor(value?: string | number | typeof Blockly.Field.SKIP_SETUP, validator?: FieldAngleValidator, config?: FieldAngleConfig);
    /**
     * Configure the field based on the given map of options.
     *
     * @param config A map of options to configure the field based on.
     */
    protected configure_(config: FieldAngleConfig): void;
    /**
     * Create the block UI for this field.
     *
     * @internal
     */
    initView(): void;
    /**
     * Updates the angle when the field rerenders.
     */
    protected render_(): void;
    /**
     * Create and show the angle field's editor.
     *
     * @param e Optional mouse event that triggered the field to open,
     *     or undefined if triggered programmatically.
     */
    protected showEditor_(e?: Event): void;
    /**
     * Creates the angle dropdown editor.
     *
     * @returns The newly created slider.
     */
    private dropdownCreate;
    /**
     * Disposes of events belonging to the angle editor.
     */
    private dropdownDispose;
    /** Hide the editor. */
    private hide;
    /**
     * Set the angle to match the mouse's position.
     *
     * @param e Mouse move event.
     */
    protected onMouseMove_(e: PointerEvent): void;
    /**
     * Convert an on-screen angle into a value for this field.
     *
     * @param angle Radians where 0: East, π/2: North, π or -π: West, -π/2: South.
     * @returns Angle value for this field, scaled and offset as specified.
     */
    private radiansToFieldAngle;
    /**
     * Convert a value for this field into an on-screen angle.
     *
     * @param angle Angle value for this field, scaled and offset as specified.
     * @returns Radians where 0: East, π/2: North, π or -π: West, -π/2: South.
     */
    private fieldAngleToRadians;
    /**
     * Handles and displays values that are input via mouse or arrow key input.
     * These values need to be rounded and wrapped before being displayed so
     * that the text input's value is appropriate.
     *
     * @param angle New angle.
     */
    private displayMouseOrKeyboardValue;
    /** Redraw the graph with the current angle. */
    private updateGraph;
    /**
     * Handle key down to the editor.
     *
     * @param e Keyboard event.
     */
    protected onHtmlInputKeyDown_(e: KeyboardEvent): void;
    /**
     * Ensure that the input value is a valid angle.
     *
     * @param newValue The input value.
     * @returns A valid angle, or null if invalid.
     */
    protected doClassValidation_(newValue: number): number | null | undefined;
    protected doClassValidation_(newValue?: number): number | null;
    /**
     * Wraps the value so that it is in the min/max display range (e.g. 0 to 360).
     *
     * @param value The value to wrap.
     * @returns The wrapped value.
     */
    private wrapValue;
    /**
     * Construct a FieldAngle from a JSON arg object.
     *
     * @param options A JSON object with options
     *     (value, mode, clockwise, offset, min, max, precision).
     * @returns The new field instance.
     * @nocollapse
     * @internal
     */
    static fromJson(options: FieldAngleFromJsonConfig): FieldAngle;
}
/** Register the field and any dependencies. */
export declare function registerFieldAngle(): void;
/**
 * The two main modes of the angle field.
 * Compass specifies:
 *   - clockwise: true
 *   - offset: 90
 *   - min: 0
 *   - max: 360
 *   - precision: 15
 *   - displayMin: 0
 *   - displayMax: 360
 *   - minorTick: 15
 *   - majorTick: 45
 *   - symbol: '°'
 *
 * Protractor specifies:
 *   - clockwise: false
 *   - offset: 0
 *   - min: 0
 *   - max: 360
 *   - precision: 15
 *   - displayMin: 0
 *   - displayMax: 360
 *   - minorTick: 15
 *   - majorTick: 45
 *   - symbol: '°'
 */
export declare enum Mode {
    COMPASS = "compass",
    PROTRACTOR = "protractor"
}
/**
 * Extra configuration options for the angle field.
 */
export interface FieldAngleConfig extends Blockly.FieldNumberConfig {
    mode?: Mode;
    clockwise?: boolean;
    offset?: number;
    displayMin?: number;
    displayMax?: number;
    minorTick?: number;
    majorTick?: number;
    symbol?: string;
}
/**
 * fromJson configuration options for the angle field.
 */
export interface FieldAngleFromJsonConfig extends FieldAngleConfig {
    value?: number;
}
/**
 * A function that is called to validate changes to the field's value before
 * they are set.
 *
 * @see {@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/validators#return_values}
 * @param newValue The value to be validated.
 * @returns One of three instructions for setting the new value: `T`, `null`,
 * or `undefined`.
 *
 * - `T` to set this function's returned value instead of `newValue`.
 *
 * - `null` to invoke `doValueInvalid_` and not set a value.
 *
 * - `undefined` to set `newValue` as is.
 */
export type FieldAngleValidator = Blockly.FieldNumberValidator;
//# sourceMappingURL=field_angle.d.ts.map